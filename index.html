<!DOCTYPE html>
<html lang="es" style="background-color: #000000; margin: 0; padding: 0; overflow: hidden;">
<head>
    <meta charset="UTF-8">
    <title>Death Note Wiki</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="Principal/assets/CSS/style.css">
    <link rel="stylesheet" href="Principal/assets/CSS/responsive.css">
    <link rel="stylesheet" href="Principal/assets/CSS/footer.css">
    <!-- Fuente estilo Death Note o similar -->
    <link href="https://fonts.googleapis.com/css2?family=UnifrakturCook:wght@700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet">

    <style>
        /* Estilos para la sección del gif central */
        html {
            overflow-y: auto !important;
        }

        body {
            min-height: 100vh;
            overflow-y: auto !important;
        }

        .center-content {
            width: 100%;
            height: 100vh; /* Cambiado para ocupar toda la altura de la ventana */
            min-height: 500px;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            z-index: 2;
            margin-bottom: 40px;
        }

        .falling-book-container {
            position: relative;
            max-width: 100%; /* Modificado para permitir que se expanda */
            width: 100%; /* Ocupa todo el ancho disponible */
            height: 100%; /* Ocupa toda la altura disponible */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .falling-book {
            max-width: 100%;
            max-height: 90vh; /* Limita la altura para evitar desbordamiento */
            width: auto;
            height: auto;
            object-fit: contain; /* Mantiene la proporción de la imagen */
            filter: drop-shadow(0 0 20px rgba(224, 196, 139, 0.8));
            margin-bottom: 30px;
        }

        .falling-message {
            position: absolute;
            bottom: 10%;
            left: 0;
            right: 0;
            font-family: 'UnifrakturCook', cursive;
            color: #e0c48b;
            font-size: 2.5rem;
            text-align: center;
            text-shadow: 0 0 14px rgba(224, 196, 139, 0.6), 0 0 8px rgba(0, 0, 0, 0.9);
            animation: glowing 2s infinite alternate;
            padding: 0 15px;
        }

        @keyframes glowing {
            from {
                text-shadow: 0 0 5px rgba(224, 196, 139, 0.6), 0 0 8px rgba(0, 0, 0, 0.9);
            }
            to {
                text-shadow: 0 0 20px rgba(224, 196, 139, 0.9), 0 0 10px rgba(0, 0, 0, 1);
            }
        }

        /* Sección de información */
        .info-section {
            width: 100%;
            padding: 40px 0 100px;
            background: linear-gradient(180deg, rgba(0,0,0,0.92) 0%, rgba(0,0,0,0.88) 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            border-top: 2px solid #e0c48b;
            z-index: 5;
            position: relative;
        }

        .info-titulo {
            font-family: 'UnifrakturCook', cursive;
            color: #e0c48b;
            font-size: 2.5rem;
            text-align: center;
            margin-bottom: 40px;
            text-shadow: 0 0 14px rgba(224, 196, 139, 0.6);
        }

        .info-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 30px;
            max-width: 1200px;
            width: 90%;
        }

        .info-card {
            background: rgba(18, 18, 18, 0.93);
            border-radius: 15px;
            padding: 28px;
            box-shadow: 0 0 30px #000a;
            flex: 1;
            min-width: 300px;
            backdrop-filter: blur(7px);
        }

        .info-card h3 {
            font-family: 'UnifrakturCook', cursive;
            color: #e0c48b;
            font-size: 1.8rem;
            margin-bottom: 15px;
            border-bottom: 2px solid rgba(224, 196, 139, 0.3);
            padding-bottom: 10px;
        }

        .info-card p {
            color: #f5f5f5;
            line-height: 1.7;
            font-size: 1.05rem;
            text-align: justify;
            margin-bottom: 20px;
        }

        /* Valoraciones */
        .valoraciones {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin: 20px 0;
        }

        .valoracion-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px;
            background: rgba(30, 30, 30, 0.7);
            border-radius: 10px;
            min-width: 100px;
            flex: 1;
        }

        .puntuacion {
            font-size: 1.8rem;
            font-weight: bold;
            color: #e0c48b;
            margin-bottom: 5px;
        }

        .plataforma {
            font-size: 0.9rem;
            color: #ccc;
        }

        /* Géneros */
        .generos {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
        }

        .genero-tag {
            background: linear-gradient(135deg, #1a1817 60%, #26221c 100%);
            color: #e0c48b;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            border: 1px solid rgba(224, 196, 139, 0.3);
        }

        /* CTA Button */
        .cta-button {
            display: inline-block;
            background: #e0c48b;
            color: #111;
            font-family: 'UnifrakturCook', cursive;
            font-size: 1.2rem;
            padding: 12px 25px;
            border-radius: 30px;
            margin-top: 20px;
            text-decoration: none;
            transition: all 0.3s ease;
            box-shadow: 0 0 15px rgba(224, 196, 139, 0.4);
        }

        .cta-button:hover {
            background: #bb903a;
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(224, 196, 139, 0.7);
        }

        /* Datos interesantes */
        .datos-lista {
            list-style-type: none;
            padding: 0;
            margin: 20px 0;
        }

        .datos-lista li {
            margin-bottom: 12px;
            padding-left: 25px;
            position: relative;
            color: #f5f5f5;
        }

        .datos-lista li:before {
            content: "•";
            color: #e0c48b;
            font-size: 1.5rem;
            position: absolute;
            left: 5px;
            top: -5px;
        }

        /* Footer mejorado */
        .footer {
            background: #0a0a0a;
            padding: 15px 0;
            border-top: 1px solid rgba(224, 196, 139, 0.3);
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .footer-categories {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            padding: 0 20px;
        }

        .footer-categories a {
            color: #ccc;
            text-decoration: none;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .footer-categories a:hover {
            color: #e0c48b;
            text-shadow: 0 0 8px rgba(224, 196, 139, 0.4);
        }

        /* NUEVO: Estilos para el botón del Test de Personalidad */
        .test-btn {
            display: inline-block;
            background: #e0c48b;
            color: #111;
            font-family: 'UnifrakturCook', cursive;
            font-size: 1.2rem;
            padding: 12px 25px;
            border-radius: 30px;
            margin-top: 20px;
            text-decoration: none;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            margin-bottom: 20px;
        }

        .test-btn:hover {
            background: #bb903a;
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(224, 196, 139, 0.7);
        }

        /* NUEVO: Estilos para el popup y formulario */
        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.85);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .popup-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .popup-content {
            background: linear-gradient(135deg, #1a1817 60%, #26221c 100%);
            border: 2px solid #e0c48b;
            border-radius: 15px;
            width: 90%;
            max-width: 700px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 30px;
            position: relative;
            box-shadow: 0 0 25px rgba(224, 196, 139, 0.5);
        }

        .popup-close {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
            color: #e0c48b;
            background: none;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .popup-close:hover {
            color: #fff;
            transform: scale(1.1);
        }

        .popup-title {
            font-family: 'UnifrakturCook', cursive;
            color: #e0c48b;
            font-size: 2rem;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(224, 196, 139, 0.4);
        }

        .test-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .question {
            font-family: 'Roboto', sans-serif;
            color: #f5f5f5;
            font-size: 1.1rem;
            margin-bottom: 10px;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-left: 10px;
        }

        .option {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .option input[type="radio"] {
            accent-color: #e0c48b;
        }

        .option label {
            color: #e0c48b;
            font-size: 1rem;
        }

        .submit-btn {
            background: #e0c48b;
            color: #111;
            font-family: 'UnifrakturCook', cursive;
            font-size: 1.2rem;
            padding: 12px 25px;
            border-radius: 30px;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            align-self: center;
            margin-top: 20px;
        }

        .submit-btn:hover {
            background: #bb903a;
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(224, 196, 139, 0.7);
        }

        .success-message {
            background: rgba(40, 40, 40, 0.9);
            border: 1px solid #e0c48b;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            margin-top: 20px;
            color: #e0c48b;
            display: none;
        }

        .success-message.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Estilos para el resultado del test */
        .resultado-personaje {
            max-width: 600px;
            margin: 0 auto;
        }

        .resultado-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
            text-align: left;
        }

        .resultado-imagen {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid #e0c48b;
            box-shadow: 0 0 20px rgba(224, 196, 139, 0.5);
        }

        .resultado-info {
            flex: 1;
        }

        .resultado-titulo {
            color: #e0c48b;
            font-size: 1.8rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .resultado-caracteristicas {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .caracteristica-tag {
            background: linear-gradient(135deg, #8B0000, #A52A2A);
            color: #e0c48b;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.85rem;
            font-weight: bold;
            border: 1px solid #e0c48b;
        }

        .resultado-descripcion {
            color: #ccc;
            line-height: 1.6;
            margin-bottom: 25px;
            text-align: justify;
            font-size: 1rem;
        }

        .resultado-acciones {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn-reiniciar, .btn-compartir {
            background: linear-gradient(135deg, #8B0000, #A52A2A);
            color: #e0c48b;
            border: 1px solid #e0c48b;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn-reiniciar:hover, .btn-compartir:hover {
            background: linear-gradient(135deg, #A52A2A, #8B0000);
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(224, 196, 139, 0.4);
        }

        /* Media queries */
        @media (max-width: 768px) {
            .falling-book-container {
                max-width: 100%;
            }

            .falling-message {
                font-size: 1.8rem;
            }

            .info-card {
                min-width: 100%;
            }

            .popup-content {
                padding: 20px;
                width: 95%;
            }

            .popup-title {
                font-size: 1.6rem;
            }

            /* Estilos responsivos para resultados */
            .resultado-header {
                flex-direction: column;
                text-align: center;
                gap: 15px;
            }

            .resultado-imagen {
                width: 100px;
                height: 100px;
            }

            .resultado-titulo {
                font-size: 1.5rem;
            }

            .resultado-acciones {
                flex-direction: column;
                align-items: center;
            }

            .btn-reiniciar, .btn-compartir {
                width: 200px;
                text-align: center;
            }
        }
    </style>
</head>
<body>
<header class="navbar">
    <div class="nav-container">
        <nav class="nav-left">
            <ul class="nav-list">
                <li><a href="Principal/Personajes/index.html">Personajes</a></li>
            </ul>
        </nav>

        <div class="logo-container">
            <a href="index.html">
                <img src="Principal/assets/images/LogoDeathNote.png"  alt="Death Note Logo" class="logo">
            </a>
        </div>

        <nav class="nav-right">
            <ul class="nav-list">
                <li><a href="Principal/Datos/index.html">Datos</a></li>
                <li><a href="Principal/Musica-multimedia/index.html">Media</a></li>
            </ul>
        </nav>
    </div>

    <div class="burger">
       <span class="barra-hamburguesa"> </span>
       <span class="barra-hamburguesa"> </span>
       <span class="barra-hamburguesa"> </span>
    </div>
    

    <a href="https://www.crunchyroll.com/es/series/G6QWD3EE6/death-note" target="_blank" class="ver-btn">
        <span class="play-icon">▶</span> Ver
    </a>
</header>

<main>
    <div class="center-content">
        <div class="falling-book-container">
            <img src="Principal/assets/images/Librocayendo.gif" alt="Death Note cayendo" class="falling-book">
            <div class="falling-message">Una Death Note va cayendo...<br>¿Qué harías?</div>
        </div>
    </div>

    <section class="info-section">
        <h2 class="info-titulo">El Universo de Death Note</h2>

        <div class="info-container">
            <div class="info-card">
                <h3>Sinopsis</h3>
                <p>Light Yagami, un estudiante brillante y prodigio, encuentra un extraño cuaderno sobrenatural llamado "Death Note", que perteneció al Shinigami Ryuk. El cuaderno otorga a su portador la capacidad de matar a cualquier persona simplemente escribiendo su nombre en sus páginas mientras visualiza su rostro.</p>

                <p>Creyendo que puede utilizar este poder para crear un mundo ideal libre de criminales, Light comienza una cruzada para eliminar a todos los delincuentes del mundo, adoptando el alias de "Kira". Sin embargo, sus acciones pronto llaman la atención de L, un enigmático detective de fama mundial, quien se compromete a detener a Kira a toda costa.</p>

                <p>Lo que sigue es un intenso juego del gato y el ratón entre dos mentes brillantes, donde ambos intentan descubrir la identidad del otro mientras justifican sus propios sentidos de la justicia. Esta batalla de ingenio, moral y estrategia plantea preguntas profundas sobre lo que realmente significa la justicia.</p>

                <div class="generos">
                    <span class="genero-tag">Thriller Psicológico</span>
                    <span class="genero-tag">Sobrenatural</span>
                    <span class="genero-tag">Misterio</span>
                    <span class="genero-tag">Drama</span>
                    <span class="genero-tag">Policíaco</span>
                </div>

                <a href="https://www.crunchyroll.com/es/series/G6QWD3EE6/death-note" target="_blank" class="cta-button">
                    <i class="fas fa-play"></i> Ver serie
                </a>
            </div>

            <div class="info-card">
                <h3>Valoraciones</h3>

                <div class="valoraciones">
                    <div class="valoracion-item">
                        <div class="puntuacion">9.0</div>
                        <div class="plataforma">IMDb</div>
                    </div>
                    <div class="valoracion-item">
                        <div class="puntuacion">8.6</div>
                        <div class="plataforma">MyAnimeList</div>
                    </div>
                    <div class="valoracion-item">
                        <div class="puntuacion">4.8</div>
                        <div class="plataforma">Crunchyroll</div>
                    </div>
                </div>

                <h3>¿Por qué verla?</h3>
                <ul class="datos-lista">
                    <li>Una de las series de anime más influyentes y aclamadas de todos los tiempos.</li>
                    <li>Personajes complejos y moralmente ambiguos que te harán cuestionar en qué lado estás.</li>
                    <li>Trama llena de giros inesperados, estrategias brillantes y dilemas éticos profundos.</li>
                    <li>Perfecta combinación de elementos sobrenaturales con un thriller psicológico realista.</li>
                    <li>Explora conceptos filosóficos sobre justicia, poder y moralidad de forma accesible.</li>
                </ul>

                <p class="musica-destacada-descripcion">"Si un humano usa la Death Note, ni el cielo ni el infierno le esperan."</p>
            </div>
        </div>

        <!-- NUEVO: Botón para el Test de Personalidad -->
        <button class="test-btn" id="openTestBtn" onclick="abrirTestPersonalidad()">
            <i class="fas fa-user-edit"></i> Test de Personalidad
        </button>
    </section>
</main>

<!-- NUEVO: Popup del Test de Personalidad -->
<div class="popup-overlay" id="testPopup">
    <div class="popup-content">
        <button class="popup-close" id="closePopupBtn" onclick="cerrarTestPersonalidad()"><i class="fas fa-times"></i></button>
        <h2 class="popup-title">Test de Personalidad: ¿Qué personaje de Death Note eres?</h2>

        <form class="test-form" id="personalityTest" onsubmit="procesarResultadoTest(event)">
            <div class="form-group">
                <div class="question">1. Si encontraras una Death Note, ¿qué harías?</div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q1_a" name="q1" value="light" required onchange="actualizarProgreso()">
                        <label for="q1_a" onclick="seleccionarOpcion('q1_a')">La usaría para crear un mundo mejor eliminando criminales</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q1_b" name="q1" value="l" onchange="actualizarProgreso()">
                        <label for="q1_b" onclick="seleccionarOpcion('q1_b')">La guardaría como evidencia y trataría de descubrir su origen</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q1_c" name="q1" value="ryuk" onchange="actualizarProgreso()">
                        <label for="q1_c" onclick="seleccionarOpcion('q1_c')">Experimentaría con ella para divertirme y ver qué sucede</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q1_d" name="q1" value="misa" onchange="actualizarProgreso()">
                        <label for="q1_d" onclick="seleccionarOpcion('q1_d')">La usaría para ayudar a alguien que admiro</label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <div class="question">2. ¿Cuál es tu mayor fortaleza?</div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q2_a" name="q2" value="light" required onchange="actualizarProgreso()">
                        <label for="q2_a" onclick="seleccionarOpcion('q2_a')">Mi inteligencia y capacidad de planificación</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q2_b" name="q2" value="l" onchange="actualizarProgreso()">
                        <label for="q2_b" onclick="seleccionarOpcion('q2_b')">Mi capacidad deductiva y pensamiento analítico</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q2_c" name="q2" value="near" onchange="actualizarProgreso()">
                        <label for="q2_c" onclick="seleccionarOpcion('q2_c')">Mi paciencia y atención al detalle</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q2_d" name="q2" value="mello" onchange="actualizarProgreso()">
                        <label for="q2_d" onclick="seleccionarOpcion('q2_d')">Mi determinación y audacia</label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <div class="question">3. ¿Qué piensas sobre la justicia?</div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q3_a" name="q3" value="light" required onchange="actualizarProgreso()">
                        <label for="q3_a" onclick="seleccionarOpcion('q3_a')">A veces hay que tomar medidas drásticas para que exista la verdadera justicia</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q3_b" name="q3" value="l" onchange="actualizarProgreso()">
                        <label for="q3_b" onclick="seleccionarOpcion('q3_b')">La justicia debe seguir un proceso y respetar la ley</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q3_c" name="q3" value="ryuk" onchange="actualizarProgreso()">
                        <label for="q3_c" onclick="seleccionarOpcion('q3_c')">La justicia es un concepto relativo, depende de quien la defina</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q3_d" name="q3" value="soichiro" onchange="actualizarProgreso()">
                        <label for="q3_d" onclick="seleccionarOpcion('q3_d')">La justicia debe ser íntegra y honesta siempre</label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <div class="question">4. ¿Cómo reaccionas ante un desafío?</div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q4_a" name="q4" value="light" required onchange="actualizarProgreso()">
                        <label for="q4_a" onclick="seleccionarOpcion('q4_a')">Planeo meticulosamente para asegurar mi victoria</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q4_b" name="q4" value="l" onchange="actualizarProgreso()">
                        <label for="q4_b" onclick="seleccionarOpcion('q4_b')">Analizo todas las posibilidades hasta encontrar la solución</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q4_c" name="q4" value="mello" onchange="actualizarProgreso()">
                        <label for="q4_c" onclick="seleccionarOpcion('q4_c')">Actúo rápidamente y tomo riesgos para ganar</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q4_d" name="q4" value="near" onchange="actualizarProgreso()">
                        <label for="q4_d" onclick="seleccionarOpcion('q4_d')">Me mantengo tranquilo y resuelvo el problema paso a paso</label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <div class="question">5. ¿Qué te motiva más en la vida?</div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q5_a" name="q5" value="light" required onchange="actualizarProgreso()">
                        <label for="q5_a" onclick="seleccionarOpcion('q5_a')">Crear un mundo perfecto bajo mi visión</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q5_b" name="q5" value="l" onchange="actualizarProgreso()">
                        <label for="q5_b" onclick="seleccionarOpcion('q5_b')">Resolver misterios y buscar la verdad</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q5_c" name="q5" value="misa" onchange="actualizarProgreso()">
                        <label for="q5_c" onclick="seleccionarOpcion('q5_c')">El amor y la devoción hacia alguien especial</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q5_d" name="q5" value="mello" onchange="actualizarProgreso()">
                        <label for="q5_d" onclick="seleccionarOpcion('q5_d')">Demostrar mi superioridad y ganar</label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <div class="question">6. ¿Cuál es tu método preferido para resolver problemas?</div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q6_a" name="q6" value="l" required onchange="actualizarProgreso()">
                        <label for="q6_a" onclick="seleccionarOpcion('q6_a')">Análisis detallado y deducción lógica</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q6_b" name="q6" value="light" onchange="actualizarProgreso()">
                        <label for="q6_b" onclick="seleccionarOpcion('q6_b')">Planificación estratégica a largo plazo</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q6_c" name="q6" value="mello" onchange="actualizarProgreso()">
                        <label for="q6_c" onclick="seleccionarOpcion('q6_c')">Acción directa e impulsiva</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q6_d" name="q6" value="near" onchange="actualizarProgreso()">
                        <label for="q6_d" onclick="seleccionarOpcion('q6_d')">Observación paciente y análisis sistemático</label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <div class="question">7. ¿Qué te motiva más en la vida?</div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q7_a" name="q7" value="light" required onchange="actualizarProgreso()">
                        <label for="q7_a" onclick="seleccionarOpcion('q7_a')">Crear un mundo perfecto bajo mi visión</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q7_b" name="q7" value="l" onchange="actualizarProgreso()">
                        <label for="q7_b" onclick="seleccionarOpcion('q7_b')">Resolver misterios y buscar la verdad</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q7_c" name="q7" value="misa" onchange="actualizarProgreso()">
                        <label for="q7_c" onclick="seleccionarOpcion('q7_c')">El amor y la devoción hacia alguien especial</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q7_d" name="q7" value="mello" onchange="actualizarProgreso()">
                        <label for="q7_d" onclick="seleccionarOpcion('q7_d')">Demostrar mi superioridad y ganar</label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <div class="question">8. ¿Cómo manejas la presión y el estrés?</div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q8_a" name="q8" value="near" required onchange="actualizarProgreso()">
                        <label for="q8_a" onclick="seleccionarOpcion('q8_a')">Me mantengo calmado y juego con mis juguetes</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q8_b" name="q8" value="l" onchange="actualizarProgreso()">
                        <label for="q8_b" onclick="seleccionarOpcion('q8_b')">Como dulces y me concentro en el problema</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q8_c" name="q8" value="mello" onchange="actualizarProgreso()">
                        <label for="q8_c" onclick="seleccionarOpcion('q8_c')">Como chocolate y actúo agresivamente</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q8_d" name="q8" value="light" onchange="actualizarProgreso()">
                        <label for="q8_d" onclick="seleccionarOpcion('q8_d')">Mantengo mi compostura y sigo mi plan</label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <div class="question">9. ¿Cuál es tu mayor debilidad?</div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q9_a" name="q9" value="light" required onchange="actualizarProgreso()">
                        <label for="q9_a" onclick="seleccionarOpcion('q9_a')">Mi orgullo y arrogancia</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q9_b" name="q9" value="l" onchange="actualizarProgreso()">
                        <label for="q9_b" onclick="seleccionarOpcion('q9_b')">Mi obsesión por resolver casos</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q9_c" name="q9" value="misa" onchange="actualizarProgreso()">
                        <label for="q9_c" onclick="seleccionarOpcion('q9_c')">Mi dependencia emocional hacia otros</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q9_d" name="q9" value="mello" onchange="actualizarProgreso()">
                        <label for="q9_d" onclick="seleccionarOpcion('q9_d')">Mi temperamento impulsivo</label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <div class="question">10. ¿Qué harías si tuvieras que elegir entre salvar a un ser querido o salvar a muchas personas inocentes?</div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q10_a" name="q10" value="misa" required onchange="actualizarProgreso()">
                        <label for="q10_a" onclick="seleccionarOpcion('q10_a')">Salvaría a mi ser querido sin dudarlo</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q10_b" name="q10" value="l" onchange="actualizarProgreso()">
                        <label for="q10_b" onclick="seleccionarOpcion('q10_b')">Buscaría una tercera opción para salvar a todos</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q10_c" name="q10" value="light" onchange="actualizarProgreso()">
                        <label for="q10_c" onclick="seleccionarOpcion('q10_c')">Salvaría a las muchas personas, es lo lógico</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q10_d" name="q10" value="near" onchange="actualizarProgreso()">
                        <label for="q10_d" onclick="seleccionarOpcion('q10_d')">Analizaría fríamente cuál decisión tiene mejores consecuencias</label>
                    </div>
                </div>
            </div>

            <button type="submit" class="submit-btn">Descubrir mi personaje</button>

            <div class="success-message" id="successMessage">
                <div id="resultadoPersonaje" class="resultado-personaje">
                    <!-- Aquí se mostrará la imagen y descripción del personaje resultado -->
                </div>
            </div>
        </form>
    </div>
</div>


<footer class="footer-container death-note-font">
    <div class="footer-section">
        <h3>Acerca de</h3>
        <p>Un rincón oscuro para los que deseen un mundo nuevo... o simplemente información.</p>
        <img src="https://upload.wikimedia.org/wikipedia/en/thumb/9/9b/Death_Note_Vol_1.jpg/220px-Death_Note_Vol_1.jpg" alt="Death Note Volumen 1" class="footer-image ryuk-silhouette">
    </div>

    <div class="footer-section">
        <h3>Enlaces Útiles</h3>
        <ul>
            <li><a href="#">Noticias Oscuras</a></li>
            <li><a href="#">El Cuaderno Prohibido</a></li>
            <li><a href="#">Susurros de Shinigami</a></li>
            <li><a href="#">Reglas del Juego</a></li>
        </ul>
    </div>

    <div class="footer-section">
        <h3>Redes de Sombras</h3>
        <div class="social-icons">
            <a href="#" title="Facebook Oscuro"><i class="fab fa-facebook-f"></i></a>
            <a href="#" title="Twitter Tenebroso"><i class="fab fa-twitter"></i></a>
            <a href="#" title="Instagram Enigmático"><i class="fab fa-instagram"></i></a>
        </div>
        <img src="https://i.pinimg.com/originals/4a/6a/7a/4a6a7a172527b419414948840891940d.png" alt="Ryuk" class="footer-image ryuk-silhouette" style="max-width: 80px;">
    </div>

    <div class="copyright">
        <p>&copy; 2025 El Legado de Kira. Todos los derechos reservados.</p>
    </div>
</footer>

<!-- NUEVO: JavaScript para la funcionalidad del popup y formulario -->
<script>
    // Variables globales para el progreso del test
    let progresoTest = 0;
    const totalPreguntas = 10;

    // Función para abrir test de personalidad (onclick)
    function abrirTestPersonalidad() {
        // Confirm antes de abrir el test
        const confirmar = confirm('¿Estás listo para descubrir qué personaje de Death Note eres? El test tiene 10 preguntas.');
        
        if (confirmar) {
            const testPopup = document.getElementById('testPopup');
            testPopup.classList.add('active');
            document.body.style.overflow = 'hidden';
            
            // Prompt opcional para personalizar la experiencia
            const nombre = prompt('¿Cuál es tu nombre? (opcional)');
            if (nombre && nombre.trim() !== '') {
                const tituloTest = document.querySelector('.popup-title');
                tituloTest.textContent = `Test de Personalidad Death Note - ${nombre}`;
                console.log('Test iniciado por:', nombre);
            }
        }
        
        console.log('Popup del test abierto');
    }

    // Función para cerrar el test de personalidad (onclick)
    function cerrarTestPersonalidad() {
        const testPopup = document.getElementById('testPopup');
        const successMessage = document.getElementById('successMessage');
        const personalityTest = document.getElementById('personalityTest');
        
        testPopup.classList.remove('active');
        document.body.style.overflow = 'auto';
        successMessage.classList.remove('active');
        personalityTest.reset();
        progresoTest = 0;
        
        // Resetear título del test
        const tituloTest = document.querySelector('.popup-title');
        tituloTest.textContent = 'Test de Personalidad Death Note';
        
        // Resetear estilos de todas las opciones
        const labels = document.querySelectorAll('.option label');
        labels.forEach(label => {
            label.style.backgroundColor = '';
            label.style.color = '';
        });
        
        // Resetear botón submit
        const submitBtn = document.querySelector('.submit-btn');
        submitBtn.style.backgroundColor = '#666';
        submitBtn.style.transform = 'scale(1)';
        
        console.log('Test de personalidad cerrado');
    }

    // Función para actualizar progreso (onchange)
    function actualizarProgreso() {
        const preguntas = ['q1', 'q2', 'q3', 'q4', 'q5', 'q6', 'q7', 'q8', 'q9', 'q10'];
        let preguntasRespondidas = 0;
        
        preguntas.forEach(pregunta => {
            const respuesta = document.querySelector(`input[name="${pregunta}"]:checked`);
            if (respuesta) {
                preguntasRespondidas++;
            }
        });
        
        progresoTest = (preguntasRespondidas / totalPreguntas) * 100;
        console.log(`Progreso del test: ${progresoTest.toFixed(0)}%`);
        
        // Cambiar color del botón según el progreso
        const submitBtn = document.querySelector('.submit-btn');
        if (progresoTest === 100) {
            submitBtn.style.backgroundColor = '#8B0000';
            submitBtn.style.transform = 'scale(1.05)';
        } else {
            submitBtn.style.backgroundColor = '#666';
            submitBtn.style.transform = 'scale(1)';
        }
    }

    // Función para seleccionar opción (onclick en labels)
    function seleccionarOpcion(opcionId) {
        const input = document.getElementById(opcionId);
        input.checked = true;
        
        // Efecto visual al seleccionar
        const label = document.querySelector(`label[for="${opcionId}"]`);
        label.style.backgroundColor = '#8B0000';
        label.style.color = '#e0c48b';
        
        // Remover estilo de otras opciones del mismo grupo
        const pregunta = opcionId.substring(0, 2); // q1, q2, etc.
        const otrasOpciones = document.querySelectorAll(`input[name="${pregunta}"]`);
        otrasOpciones.forEach(opcion => {
            if (opcion.id !== opcionId) {
                const otraLabel = document.querySelector(`label[for="${opcion.id}"]`);
                otraLabel.style.backgroundColor = '';
                otraLabel.style.color = '';
            }
        });
        
        actualizarProgreso();
        console.log(`Opción seleccionada: ${opcionId}`);
    }

    // Función para procesar resultado del test (onsubmit)
    function procesarResultadoTest(event) {
        event.preventDefault();
        
        // Verificar que todas las preguntas estén respondidas
        const preguntas = ['q1', 'q2', 'q3', 'q4', 'q5', 'q6', 'q7', 'q8', 'q9', 'q10'];
        let preguntasRespondidas = 0;
        
        preguntas.forEach(pregunta => {
            const respuesta = document.querySelector(`input[name="${pregunta}"]:checked`);
            if (respuesta) {
                preguntasRespondidas++;
            }
        });
        
        // Alert si no están todas las preguntas respondidas
        if (preguntasRespondidas < 10) {
            alert(`Por favor responde todas las preguntas. Te faltan ${10 - preguntasRespondidas} preguntas por responder.`);
            return;
        }
        
        // Calcular resultado basado en respuestas
        const respuestas = {
            light: 0, l: 0, near: 0, mello: 0, 
            misa: 0
        };
        
        preguntas.forEach(pregunta => {
            const respuesta = document.querySelector(`input[name="${pregunta}"]:checked`);
            if (respuesta) {
                respuestas[respuesta.value]++;
            }
        });
        
        // Encontrar el personaje con más puntos
        let personajeResultado = 'light';
        let maxPuntos = 0;
        for (const [personaje, puntos] of Object.entries(respuestas)) {
            if (puntos > maxPuntos) {
                maxPuntos = puntos;
                personajeResultado = personaje;
            }
        }
        
        // Alert de confirmación de resultados enviados
        alert('¡Resultados del test procesados correctamente! Preparando tu resultado personalizado...');
        
        console.log('Resultado del test:', personajeResultado, 'con', maxPuntos, 'puntos');
        mostrarResultado(personajeResultado);
    }

    // Función para mostrar resultado (onclick en botón submit)
    function mostrarResultado(personaje) {
        const successMessage = document.getElementById('successMessage');
        const resultadoPersonaje = document.getElementById('resultadoPersonaje');
        
        // Datos de cada personaje
        const personajes = {
            light: {
                nombre: 'Light Yagami (Kira)',
                imagen: 'Principal/assets/images/Personajes/Light-Yagami/LightYagami.jpg',
                descripcion: 'Eres un genio estratega con una visión clara de cómo debería ser el mundo. Tu inteligencia superior y tu determinación te llevan a tomar decisiones difíciles para crear lo que consideras un mundo perfecto. Tienes una personalidad carismática pero también un lado oscuro impulsado por tu sentido de justicia.',
                caracteristicas: ['Inteligente', 'Estratega', 'Carismático', 'Determinado', 'Visionario']
            },
            l: {
                nombre: 'L Lawliet',
                imagen: 'Principal/assets/images/Personajes/L-Lawliet/L-Lawliet.jpg',
                descripcion: 'Eres un detective brillante con una mente analítica excepcional. Tu capacidad para resolver los casos más complejos es legendaria. Aunque puedes parecer excéntrico, tu dedicación a la verdad y la justicia es inquebrantable. Prefieres trabajar en las sombras y confías en tu lógica por encima de todo.',
                caracteristicas: ['Analítico', 'Brillante', 'Excéntrico', 'Observador', 'Justo']
            },
            near: {
                nombre: 'Near (Nate River)',
                imagen: 'Principal/assets/images/Personajes/Near/Near.jpg',
                descripcion: 'Eres una persona calmada y metódica que prefiere observar antes de actuar. Tu paciencia y atención al detalle te permiten resolver problemas complejos de manera sistemática. Aunque puedes parecer frío, tu enfoque racional te ayuda a tomar las mejores decisiones.',
                caracteristicas: ['Paciente', 'Metódico', 'Observador', 'Racional', 'Sistemático']
            },
            mello: {
                nombre: 'Mello (Mihael Keehl)',
                imagen: 'Principal/assets/images/Personajes/Mello/Mello.jpg',
                descripcion: 'Eres una persona apasionada e impulsiva que no teme tomar riesgos para alcanzar tus objetivos. Tu determinación y tu naturaleza competitiva te impulsan a actuar rápidamente. Aunque puedes ser temperamental, tu lealtad hacia quienes te importan es inquebrantable.',
                caracteristicas: ['Apasionado', 'Impulsivo', 'Competitivo', 'Leal', 'Determinado']
            },
            misa: {
                nombre: 'Misa Amane',
                imagen: 'Principal/assets/images/Personajes/Misa-Amane/Misa-Amane.jpg',
                descripcion: 'Eres una persona emotiva y devota que valora profundamente las relaciones personales. Tu capacidad para amar incondicionalmente y tu lealtad son tus mayores fortalezas. Aunque puedes ser impulsiva en tus decisiones, siempre actúas desde el corazón.',
                caracteristicas: ['Emotiva', 'Devota', 'Leal', 'Apasionada', 'Intuitiva']
            }
        };
        
        const datosPersonaje = personajes[personaje];
        
        successMessage.classList.add('active');
        resultadoPersonaje.innerHTML = `
            <div class="resultado-header">
                <img src="${datosPersonaje.imagen}" alt="${datosPersonaje.nombre}" class="resultado-imagen">
                <div class="resultado-info">
                    <h3 class="resultado-titulo">¡Eres ${datosPersonaje.nombre}!</h3>
                    <div class="resultado-caracteristicas">
                        ${datosPersonaje.caracteristicas.map(car => `<span class="caracteristica-tag">${car}</span>`).join('')}
                    </div>
                </div>
            </div>
            <p class="resultado-descripcion">${datosPersonaje.descripcion}</p>
            <div class="resultado-acciones">
                <button onclick="reiniciarTest()" class="btn-reiniciar">Hacer test de nuevo</button>
                <button onclick="compartirResultado('${personaje}')" class="btn-compartir">Compartir resultado</button>
            </div>
        `;
        
        // Desplazarse al mensaje de éxito
        setTimeout(() => {
            successMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }, 100);
        
        console.log('Resultado mostrado para:', datosPersonaje.nombre);
    }

    // Función para reiniciar el test
    function reiniciarTest() {
        const testPopup = document.getElementById('testPopup');
        const successMessage = document.getElementById('successMessage');
        const personalityTest = document.getElementById('personalityTest');
        
        successMessage.classList.remove('active');
        personalityTest.reset();
        progresoTest = 0;
        
        // Resetear título del test
        const tituloTest = document.querySelector('.popup-title');
        tituloTest.textContent = 'Test de Personalidad Death Note';
        
        // Resetear estilos de todas las opciones
        const labels = document.querySelectorAll('.option label');
        labels.forEach(label => {
            label.style.backgroundColor = '';
            label.style.color = '';
        });
        
        // Resetear botón submit
        const submitBtn = document.querySelector('.submit-btn');
        submitBtn.style.backgroundColor = '#666';
        submitBtn.style.transform = 'scale(1)';
        
        console.log('Test reiniciado');
    }

    // Función para compartir resultado
    function compartirResultado(personaje) {
        const personajes = {
            light: 'Light Yagami (Kira)',
            l: 'L Lawliet', 
            near: 'Near',
            mello: 'Mello',
            misa: 'Misa Amane'
        };
        
        // Confirm antes de compartir
        const confirmarCompartir = confirm(`¿Quieres compartir que eres ${personajes[personaje]} en el test de Death Note?`);
        
        if (confirmarCompartir) {
            // Prompt para personalizar el mensaje
            const mensajePersonal = prompt('¿Quieres agregar un mensaje personal? (opcional)', '');
            
            let texto = `¡Acabo de hacer el test de personalidad de Death Note y soy ${personajes[personaje]}! 🖤📓`;
            if (mensajePersonal && mensajePersonal.trim() !== '') {
                texto += `\n\n"${mensajePersonal}"`;
            }
            
            if (navigator.share) {
                navigator.share({
                    title: 'Test de Personalidad Death Note',
                    text: texto,
                    url: window.location.href
                }).then(() => {
                    alert('¡Resultado compartido exitosamente!');
                }).catch(() => {
                    // Fallback si falla el share nativo
                    copiarAlPortapapeles(texto);
                });
            } else {
                // Fallback para navegadores que no soportan Web Share API
                copiarAlPortapapeles(texto);
            }
        }
        
        console.log('Compartiendo resultado:', personajes[personaje]);
    }

    // Función auxiliar para copiar al portapapeles
    function copiarAlPortapapeles(texto) {
        if (navigator.clipboard) {
            navigator.clipboard.writeText(texto + ' ' + window.location.href).then(() => {
                alert('¡Resultado copiado al portapapeles! Puedes pegarlo en tus redes sociales.');
            }).catch(() => {
                // Fallback manual
                const textArea = document.createElement('textarea');
                textArea.value = texto + ' ' + window.location.href;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                alert('¡Resultado copiado al portapapeles!');
            });
        } else {
            alert('Tu navegador no soporta copiar automáticamente. Copia manualmente este texto:\n\n' + texto + '\n\n' + window.location.href);
        }
    }
</script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Solo mantenemos los eventos que NO tienen onclick inline
        const testPopup = document.getElementById('testPopup');

        // Cerrar popup haciendo clic fuera del contenido
        testPopup.addEventListener('click', function(e) {
            if (e.target === testPopup) {
                cerrarTestPersonalidad();
            }
        });

        // Cerrar menú con la tecla Escape
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && testPopup.classList.contains('active')) {
                cerrarTestPersonalidad();
            }
        });

        console.log('Event listeners inicializados correctamente');
    });
</script>
<script src="Principal/assets/JS/headerScroll.js"></script>
<script src="Principal/assets/JS/navbarHamburger.js"></script>
</body>
</html>